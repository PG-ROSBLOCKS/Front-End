{
  "workspace_1681234567891": "<xml><variables><variable id=\"xSN0-p5iTdQ/D$bBBdWf\">low_stock_products</variable><variable id=\"6S~GI2WR9bYOW}_~{P8*\">total_value</variable><variable id=\"oWq=sjV)M6+=_[Ex+f#n\">product_id</variable><variable id=\"9JvzY4fhjZ4,13Ouh(?V\">product_name</variable><variable id=\"QsxIwxxaI[=~4w(K0*X,\">quantity</variable><variable id=\"-EQT@YA`rZ-XbkTkY}y{\">price</variable><variable id=\":GUCX^7^a5?L#gj~w9(`\">needs_restock</variable><variable id=\"RGJOoex2+b{BR-+d;9MV\">stock_value</variable></variables><block type=\"ros2_create_subscriber\" id=\"subBlock1\" x=\"1144\" y=\"-112\"><mutation messagetype=\"ProductStock\"></mutation><field name=\"TOPIC_NAME\">/inventory_updates</field><field name=\"MSG_TYPE\">ProductStock</field><statement name=\"CALLBACK\"><block type=\"variables_set\" id=\"initArrayBlock\"><field name=\"VAR\" id=\"xSN0-p5iTdQ/D$bBBdWf\">low_stock_products</field><value name=\"VALUE\"><block type=\"text\" id=\"emptyArrayText\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\" id=\"totalValueBlock\"><field name=\"VAR\" id=\"6S~GI2WR9bYOW}_~{P8*\">total_value</field><value name=\"VALUE\"><block type=\"math_number\" id=\"initZeroValue\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"productIdVarBlock\"><field name=\"VAR\" id=\"oWq=sjV)M6+=_[Ex+f#n\">product_id</field><value name=\"VALUE\"><block type=\"msg_variable\" id=\"getMsgProductId\"><field name=\"VAR_NAME\">product_id</field><field name=\"VAR_TYPE\">string</field></block></value><next><block type=\"variables_set\" id=\"productNameVarBlock\"><field name=\"VAR\" id=\"9JvzY4fhjZ4,13Ouh(?V\">product_name</field><value name=\"VALUE\"><block type=\"msg_variable\" id=\"getMsgProductName\"><field name=\"VAR_NAME\">name</field><field name=\"VAR_TYPE\">string</field></block></value><next><block type=\"variables_set\" id=\"quantityVarBlock\"><field name=\"VAR\" id=\"QsxIwxxaI[=~4w(K0*X,\">quantity</field><value name=\"VALUE\"><block type=\"msg_variable\" id=\"getMsgQuantity\"><field name=\"VAR_NAME\">quantity</field><field name=\"VAR_TYPE\">int32</field></block></value><next><block type=\"variables_set\" id=\"priceVarBlock\"><field name=\"VAR\" id=\"-EQT@YA`rZ-XbkTkY}y{\">price</field><value name=\"VALUE\"><block type=\"msg_variable\" id=\"getMsgPrice\"><field name=\"VAR_NAME\">price</field><field name=\"VAR_TYPE\">float32</field></block></value><next><block type=\"variables_set\" id=\"needsRestockVarBlock\"><field name=\"VAR\" id=\":GUCX^7^a5?L#gj~w9(`\">needs_restock</field><value name=\"VALUE\"><block type=\"msg_variable\" id=\"getMsgNeedsRestock\"><field name=\"VAR_NAME\">needs_restock</field><field name=\"VAR_TYPE\">bool</field></block></value><next><block type=\"ros2_log\" id=\"productLogBlock\"><field name=\"LOG_LEVEL\">self.get_logger().info</field><value name=\"MESSAGE\"><block type=\"text_join\" id=\"productLogMsg\"><mutation items=\"4\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"productLogPrefix\"><field name=\"TEXT\">Actualización de inventario: </field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"getNameForLog\"><field name=\"VAR\" id=\"9JvzY4fhjZ4,13Ouh(?V\">product_name</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"quantitySeparator\"><field name=\"TEXT\"> - Cantidad: </field></block></value><value name=\"ADD3\"><block type=\"variables_get\" id=\"getQuantityForLog\"><field name=\"VAR\" id=\"QsxIwxxaI[=~4w(K0*X,\">quantity</field></block></value></block></value><next><block type=\"variables_set\" id=\"inventoryValueBlock\"><field name=\"VAR\" id=\"RGJOoex2+b{BR-+d;9MV\">stock_value</field><value name=\"VALUE\"><block type=\"math_arithmetic\" id=\"calcInventoryValue\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><block type=\"variables_get\" id=\"getQuantityForCalc\"><field name=\"VAR\" id=\"QsxIwxxaI[=~4w(K0*X,\">quantity</field></block></value><value name=\"B\"><block type=\"variables_get\" id=\"getPriceForCalc\"><field name=\"VAR\" id=\"-EQT@YA`rZ-XbkTkY}y{\">price</field></block></value></block></value><next><block type=\"variables_set\" id=\"updateTotalBlock\"><field name=\"VAR\" id=\"6S~GI2WR9bYOW}_~{P8*\">total_value</field><value name=\"VALUE\"><block type=\"math_arithmetic\" id=\"addToTotal\"><field name=\"OP\">ADD</field><value name=\"A\"><block type=\"variables_get\" id=\"getTotalForUpdate\"><field name=\"VAR\" id=\"6S~GI2WR9bYOW}_~{P8*\">total_value</field></block></value><value name=\"B\"><block type=\"variables_get\" id=\"getStockValueForUpdate\"><field name=\"VAR\" id=\"RGJOoex2+b{BR-+d;9MV\">stock_value</field></block></value></block></value><next><block type=\"controls_if\" id=\"checkLowStockBlock\"><value name=\"IF0\"><block type=\"logic_operation\" id=\"lowStockCondition\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"variables_get\" id=\"getNeedsRestockFlag\"><field name=\"VAR\" id=\":GUCX^7^a5?L#gj~w9(`\">needs_restock</field></block></value><value name=\"B\"><block type=\"logic_compare\" id=\"quantityThresholdCheck\"><field name=\"OP\">LT</field><value name=\"A\"><block type=\"variables_get\" id=\"getQuantityForCheck\"><field name=\"VAR\" id=\"QsxIwxxaI[=~4w(K0*X,\">quantity</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"lowStockThreshold\"><field name=\"NUM\">10</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"updateLowStockListBlock\"><field name=\"VAR\" id=\"xSN0-p5iTdQ/D$bBBdWf\">low_stock_products</field><value name=\"VALUE\"><block type=\"text_join\" id=\"updateLowStockMsg\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"variables_get\" id=\"getLowStockList\"><field name=\"VAR\" id=\"xSN0-p5iTdQ/D$bBBdWf\">low_stock_products</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"getProductNameForList\"><field name=\"VAR\" id=\"9JvzY4fhjZ4,13Ouh(?V\">product_name</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"listSeparator\"><field name=\"TEXT\">, </field></block></value></block></value><next><block type=\"ros2_log\" id=\"lowStockWarningBlock\"><field name=\"LOG_LEVEL\">self.get_logger().info</field><value name=\"MESSAGE\"><block type=\"text_join\" id=\"lowStockWarningMsg\"><mutation items=\"4\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"warningPrefix\"><field name=\"TEXT\">¡Stock bajo! Producto: </field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"getNameForWarning\"><field name=\"VAR\" id=\"9JvzY4fhjZ4,13Ouh(?V\">product_name</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"idSeparator\"><field name=\"TEXT\"> (ID: </field></block></value><value name=\"ADD3\"><block type=\"text_join\" id=\"idAndQuantity\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"variables_get\" id=\"getIdForWarning\"><field name=\"VAR\" id=\"oWq=sjV)M6+=_[Ex+f#n\">product_id</field></block></value><value name=\"ADD1\"><block type=\"text\" id=\"quantityPrefixWarning\"><field name=\"TEXT\">) - Quedan </field></block></value><value name=\"ADD2\"><block type=\"variables_get\" id=\"getQuantityForWarning\"><field name=\"VAR\" id=\"QsxIwxxaI[=~4w(K0*X,\">quantity</field></block></value></block></value></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>",
  "mapSessionId": "",
  "workspace_tabs": "[{\"id\":1681234567890,\"name\":\"InventoryMessage\"},{\"id\":1681234567891,\"name\":\"InventoryMonitor\"},{\"id\":1681234567892,\"name\":\"InventoryManager\"}]",
  "consoleService_1681234567891": "true",
  "workspace_1681234567892": "<xml><block type=\"ros2_create_publisher\" id=\"pubBlock1\" x=\"486\" y=\"109\"><mutation messagetype=\"ProductStock\"></mutation><field name=\"TOPIC_NAME\">/inventory_updates</field><field name=\"MSG_TYPE\">ProductStock</field><statement name=\"MAIN\"><block type=\"ros2_log\" id=\"initLogBlock\"><field name=\"LOG_LEVEL\">self.get_logger().info</field><value name=\"MESSAGE\"><block type=\"text\" id=\"initTextBlock\"><field name=\"TEXT\">Iniciando gestor de inventario</field></block></value><next><block type=\"ros2_publish_message\" id=\"^Drk2H_;yU/aVQ)bZ!TH\"><mutation messagetype=\"ProductStock\" messagefields=\"[{&quot;type&quot;:&quot;string&quot;,&quot;name&quot;:&quot;product_id&quot;},{&quot;type&quot;:&quot;string&quot;,&quot;name&quot;:&quot;name&quot;},{&quot;type&quot;:&quot;int64&quot;,&quot;name&quot;:&quot;quantity&quot;},{&quot;type&quot;:&quot;float32&quot;,&quot;name&quot;:&quot;price&quot;},{&quot;type&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;needs_restock&quot;}]\" fieldvalues=\"{}\"></mutation><field name=\"MSG_TYPE\">ProductStock</field><value name=\"FIELD_product_id\"><block type=\"text\" id=\"pR:5HK;4WY*Amm-ec1kh\"><field name=\"TEXT\">1</field></block></value><value name=\"FIELD_name\"><block type=\"text\" id=\"JH,1k`jZYGO-dQ~U*17L\"><field name=\"TEXT\">Lentejas</field></block></value><value name=\"FIELD_quantity\"><block type=\"math_number\" id=\"ah0G(ro-oV8jQ*S+`7Xq\"><field name=\"NUM\">2</field></block></value><value name=\"FIELD_price\"><block type=\"float_number\" id=\"rXlF*S#dY_IDILOP~P[:\"><field name=\"NUM\">1500.2</field></block></value><value name=\"FIELD_needs_restock\"><block type=\"logic_boolean\" id=\"bnP5w=x,kZONdGTGccbu\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement></block></xml>",
  "workspace_1681234567890": "<xml><block type=\"ros2_message_block\" id=\"#O3wZ*d+C;C$B5QDkIU/\" x=\"292\" y=\"135\"><field name=\"MESSAGE_NAME\">ProductStock</field><statement name=\"MESSAGE_FIELDS\"><block type=\"ros2_named_message\" id=\"S(@n9QT7yN3ZxH+=jXMe\"><field name=\"MESSAGE_TYPE\">string</field><field name=\"MESSAGE_NAME\">product_id</field><next><block type=\"ros2_named_message\" id=\"dq$~wpgw;FQc1gj6e55k\"><field name=\"MESSAGE_TYPE\">string</field><field name=\"MESSAGE_NAME\">name</field><next><block type=\"ros2_named_message\" id=\"OC^Z;bLMrmuk4P@slH?G\"><field name=\"MESSAGE_TYPE\">int64</field><field name=\"MESSAGE_NAME\">quantity</field><next><block type=\"ros2_named_message\" id=\".7Pk}?EE89M]J2./B~7#\"><field name=\"MESSAGE_TYPE\">float32</field><field name=\"MESSAGE_NAME\">price</field><next><block type=\"ros2_named_message\" id=\"Ztk`6(|~*)qFk1h`SXW5\"><field name=\"MESSAGE_TYPE\">bool</field><field name=\"MESSAGE_NAME\">needs_restock</field></block></next></block></next></block></next></block></next></block></statement></block></xml>",
  "consoleService_1681234567890": "true",
  "consoleService_1681234567892": "true"
}